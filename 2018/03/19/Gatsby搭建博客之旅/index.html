<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>Gatsby搭建博客之旅 | LiuYang&#39;s blog | 探索，分享，创新——追求卓越</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="Gatsby简介 Blazing-fast static site generator for React （React的快速静态网站生成器）  几大特点：  1.Modern web tech without the headache（不再为web技术落后而头痛）  Enjoy the power of the latest web technologies – React.js , Webpa">
<meta property="og:type" content="article">
<meta property="og:title" content="Gatsby搭建博客之旅">
<meta property="og:url" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/index.html">
<meta property="og:site_name" content="LiuYang&#39;s blog">
<meta property="og:description" content="Gatsby简介 Blazing-fast static site generator for React （React的快速静态网站生成器）  几大特点：  1.Modern web tech without the headache（不再为web技术落后而头痛）  Enjoy the power of the latest web technologies – React.js , Webpa">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/gatsby流程.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/gatsby-init.gif">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/Rest请求.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/GraphQL请求.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/graphiql.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/gatsby工程目录.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/主页.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/首页组件.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/graphql_file.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/graphql_markdown.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/Post页面.png">
<meta property="og:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/gatsby模板.png">
<meta property="og:updated_time" content="2018-03-26T12:41:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Gatsby搭建博客之旅">
<meta name="twitter:description" content="Gatsby简介 Blazing-fast static site generator for React （React的快速静态网站生成器）  几大特点：  1.Modern web tech without the headache（不再为web技术落后而头痛）  Enjoy the power of the latest web technologies – React.js , Webpa">
<meta name="twitter:image" content="https://handsomeliuyang.github.io/2018/03/19/Gatsby搭建博客之旅/gatsby流程.png">
    
        <link rel="alternate" type="application/atom+xml" title="LiuYang&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/logo.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">刘阳</h5>
          <a href="mailto:40610243@qq.com" title="40610243@qq.com" class="mail">40610243@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                类别
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-link"></i>
                关于
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Gatsby搭建博客之旅</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Gatsby搭建博客之旅</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-03-19T09:25:39.000Z" itemprop="datePublished" class="page-time">
  2018-03-19
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端/">前端</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Gatsby简介"><span class="post-toc-number">1.</span> <span class="post-toc-text">Gatsby简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#HelloWord"><span class="post-toc-number">2.</span> <span class="post-toc-text">HelloWord</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#技术点"><span class="post-toc-number">3.</span> <span class="post-toc-text">技术点</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SASS"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">SASS</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#GraphQL"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">GraphQL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PWA"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">PWA</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Gatsby搭建博客"><span class="post-toc-number">4.</span> <span class="post-toc-text">Gatsby搭建博客</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#工程目录"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">工程目录</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#第三方库"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">第三方库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主页"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">主页</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Layout"><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">Layout</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#首页整体布局"><span class="post-toc-number">4.3.2.</span> <span class="post-toc-text">首页整体布局</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#适应不同尺寸的屏幕"><span class="post-toc-number">4.3.3.</span> <span class="post-toc-text">适应不同尺寸的屏幕</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#空格实现"><span class="post-toc-number">4.3.4.</span> <span class="post-toc-text">空格实现</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#博客相关的gatsby插件"><span class="post-toc-number">4.3.5.</span> <span class="post-toc-text">博客相关的gatsby插件</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Post页面"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">Post页面</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Gatsby与Hexo的对比"><span class="post-toc-number">5.</span> <span class="post-toc-text">Gatsby与Hexo的对比</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考"><span class="post-toc-number">6.</span> <span class="post-toc-text">参考</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Gatsby搭建博客之旅"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Gatsby搭建博客之旅</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-03-19 17:25:39" datetime="2018-03-19T09:25:39.000Z"  itemprop="datePublished">2018-03-19</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端/">前端</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="Gatsby简介"><a href="#Gatsby简介" class="headerlink" title="Gatsby简介"></a>Gatsby简介</h2><blockquote>
<p>Blazing-fast static site generator for React （React的快速静态网站生成器）</p>
</blockquote>
<p><strong>几大特点：</strong></p>
<blockquote>
<p>1.Modern web tech without the headache（不再为web技术落后而头痛）</p>
<blockquote>
<p>Enjoy the power of the latest web technologies – React.js , Webpack , modern JavaScript and CSS and more — all setup and waiting for you to start building. (受最新Web前端技术的强大功能–React.js，Webpack，现代JavaScript和CSS等等，所有这一切都将启动并等待您的开始。)</p>
</blockquote>
<p>2.Bring your own data (使用你自定义的数据)</p>
<blockquote>
<p>Gatsby’s rich data plugin ecosystem lets you build sites with the data you want — from one or many sources: Pull data from headless CMSs, SaaS services, APIs, databases, your file system &amp; more directly into your pages using GraphQL .(Gatsby丰富的数据插件生态系统允许您使用您想要的数据构建网站 - 来自一个或多个来源：使用GraphQL将数据从无头CMS，SaaS服务，API，数据库，文件系统等更直接地导入您的页面)</p>
</blockquote>
<p>3.Scale to the entire internet (轻松发布到互联网)</p>
<blockquote>
<p>Gatsby.js is Internet Scale. Forget complicated deploys with databases and servers and their expensive, time-consuming setup costs, maintenance, and scaling fears. Gatsby.js builds your site as “static” files which can be deployed easily on dozens of services.（Gatsby.js是互联网化的。 你可以不用理会数据库和服务器的复杂部署，以及昂贵，耗时的设置成本，维护和缩放恐惧。 Gatsby.js将您的网站构建为“静态”文件，可以轻松部署在数十种服务上）</p>
</blockquote>
<p>4.Future-proof your website (使您的网站面向未来)</p>
<blockquote>
<p>Don’t build a website with last decade’s tech. The future of the web is mobile, JavaScript and APIs—the JAMstack. Every website is a web app and every web app is a website. Gatsby.js is the universal JavaScript framework you’ve been waiting for.(不要用过去十年的技术建立一个网站。 网络的未来是移动的，JavaScript和API - JAMstack。 每个网站是一个Web应用程序，每个Web应用程序是一个网站。 Gatsby.js是你一直在等待的通用JavaScript框架。)</p>
</blockquote>
<p>5.Static Progressive Web Apps (静态PWA)</p>
<blockquote>
<p>Gatsby.js is a static PWA (Progressive Web App) generator. You get code and data splitting out-of-the-box. Gatsby loads only the critical HTML, CSS, data, and JavaScript so your site loads as fast as possible. Once loaded, Gatsby prefetches resources for other pages so clicking around the site feels incredibly fast.(Gatsby.js是一个静态PWA（Progressive Web App）生成器。 您可以将代码和数据分开。 Gatsby只加载关键的HTML，CSS，数据和JavaScript，以便您的网站加载尽可能快。 一旦加载，Gatsby预取其他网页的资源，所以点击网站感觉非常快。)</p>
</blockquote>
<p>6.Speed past the competition (超越竞争)</p>
<blockquote>
<p>Gatsby.js builds the fastest possible website. Instead of waiting to generate pages when requested, pre-build pages and lift them into a global cloud of servers — ready to be delivered instantly to your users wherever they are.(Gatsby.js建立最快的网站。 不需要等待请求时生成页面，而是预先生成页面，并将其提升到全球服务器云端 - 随时随地传送给用户，无论他们身在何处。)</p>
</blockquote>
</blockquote>
<p><strong>工作原理：</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/gatsby流程.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="HelloWord"><a href="#HelloWord" class="headerlink" title="HelloWord"></a>HelloWord</h2><p>按官网教程很容易创建一个简单的HelloWord。<a href="https://www.gatsbyjs.org/docs/" target="_blank" rel="noopener">详见</a></p>
<p>常用命令：</p>
<ol>
<li>gatsby new xxx // 创建一个新的项目</li>
<li>gatsby develop // 构建开发站点</li>
<li>gatsby serve // 测试发布构建</li>
<li>gatsby build // 发布构建</li>
</ol>
<p><strong>效果如下：</strong><br><img src="/2018/03/19/Gatsby搭建博客之旅/gatsby-init.gif" alt=""></p>
<h2 id="技术点"><a href="#技术点" class="headerlink" title="技术点"></a>技术点</h2><p>React，Webpack，ES6这三种技术就不重点介绍了</p>
<h3 id="SASS"><a href="#SASS" class="headerlink" title="SASS"></a>SASS</h3><blockquote>
<p>Sass 是对 CSS 的扩展，让 CSS 语言更强大、优雅。 它允许你使用变量、嵌套规则、 mixins、导入等众多功能， 并且完全兼容 CSS 语法。 Sass 有助于保持大型样式表结构良好， 同时也让你能够快速开始小型项目， 特别是在搭配 Compass 样式库一同使用时。</p>
</blockquote>
<p><a href="http://sass.bootcss.com/docs/sass-reference/" target="_blank" rel="noopener">更多请参考</a></p>
<h3 id="GraphQL"><a href="#GraphQL" class="headerlink" title="GraphQL"></a>GraphQL</h3><blockquote>
<p>GraphQL is a query language for APIs and a runtime for fulfilling those queries with your existing data. GraphQL provides a complete and understandable description of the data in your API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools.(GraphQL是在API能提供的数据范围内，提供查询能力的语言。GraphQL在您的API中提供了对数据的完整和可理解的描述，使客户能够准确地询问他们需要什么，并且更容易随时间发展API，并支持强大的开发人员工具。)</p>
</blockquote>
<p><a href="https://graphql.org/" target="_blank" rel="noopener">更多请参考</a></p>
<p><strong>Rest请求过程：</strong><br><img src="/2018/03/19/Gatsby搭建博客之旅/Rest请求.png" alt=""></p>
<p><strong>GraphQL请求过程：</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/GraphQL请求.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>GraphQL的特点：</p>
<ol>
<li><font color="#ff0000">入口统一，合并请求</font>：不管请求什么资源，url都是一样的。这精简了不同场景下形态各异的API数量。</li>
<li><font color="#ff0000">自定义返回值</font>：在REST中，资源的返回结构与返回数量是由服务端决定；在GraphQL，服务端只负责定义哪些资源是可用的，由客户端自己决定需要得到什么资源，避免让API消费者取到对它来说并没有用的冗余数据。</li>
<li><font color="#ff0000">数据的关联性</font>：在query里，通过id，可以把多个数据源或Api直接关联起来</li>
<li><font color="#ff0000">方便的接口调试工具</font>：GraphiQL工具，文档与调试统一，<a href="https://github.com/graphql/graphiql" target="_blank" rel="noopener">GraphiQL</a> / <a href="http://graphql.org/swapi-graphql/" target="_blank" rel="noopener">live demo</a><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/graphiql.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
</li>
</ol>
<p>注意：GraphQL是一种标准，但其具体的实现里，有些标准的特性并没有被实现。如下所描述的一样：</p>
<blockquote>
<p>从官方的定义来说，GraphQL 是一种针对 API 的查询语言；在我看来，GraphQL 是一种标准，而与标准相对的便是实现。就像 EcmaScript 与 JavaScript 的关系，从一开始你就需要有这样一种认知：GraphQL 只定义了这种查询语言语法如何、具体的语句如何执行等。但是，你在真正使用某种 GraphQL 的服务端实现时，是有可能发现 GraphQL 标准中所描述的特性尚未被实现；或者这种 GraphQL 的实现扩展了 GraphQL 标准所定义的内容。</p>
<p>举例来说，就像 ES 2017 标准正式纳入了 async/await，而从实现的角度上说，IE 没有实现这一标准，而 Edge 16 和 Chrome 62 则实现了这一标准（数据来源于 caniuse）说回 GraphQL 标准，与之相对的有相当多的服务器端实现。他们的大多遵循 GraphQL 标准来实现，但也可能稍有差别，这一切需要你自己去探索。</p>
</blockquote>
<h3 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h3><blockquote>
<p>Progressive Web App, 简称 PWA，是提升 Web App 的体验的一种新方法，能给用户原生应用的体验。</p>
<p>PWA 能做到原生应用的体验不是靠特指某一项技术，而是经过应用一些新技术进行改进，在安全、性能和体验三个方面都有很大提升，PWA 本质上是 Web App，借助一些新技术也具备了 Native App 的一些特性，兼具 Web App 和 Native App 的优点。</p>
</blockquote>
<p><a href="https://lavas.baidu.com/pwa" target="_blank" rel="noopener">更多请参考</a></p>
<h2 id="Gatsby搭建博客"><a href="#Gatsby搭建博客" class="headerlink" title="Gatsby搭建博客"></a>Gatsby搭建博客</h2><p>注意：node需要安装6.x版本，Markdown插件gatsby-transformer-remark，在node 8.x与9.x会运行失败 <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">node下载</a></p>
<p>一个博客主要包括下面几部分：</p>
<ol>
<li>主页，包括作者介绍，文章列表</li>
<li>Post页面(文章正文页)</li>
<li>归档页，Categories页，Tags页，关于页</li>
</ol>
<h3 id="工程目录"><a href="#工程目录" class="headerlink" title="工程目录"></a>工程目录</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/gatsby工程目录.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h3 id="第三方库"><a href="#第三方库" class="headerlink" title="第三方库"></a>第三方库</h3><ol>
<li><a href="https://github.com/peterramsing/lost" target="_blank" rel="noopener">lost</a>：Lost Grid是一个强大的网格系统，可以方便实现表格拆分</li>
<li><a href="https://github.com/moment/moment" target="_blank" rel="noopener">moment</a>：解析，验证，操作和显示日期</li>
<li><a href="https://github.com/ReactTraining/react-media" target="_blank" rel="noopener">react-media</a>：适配不同屏幕</li>
</ol>
<h3 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/主页.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h4 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h4><p>在我们这个demo里，首页与Post没有相同的部分，如footer，header，所以Layout里，非常的简单：<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Helmet <span class="keyword">from</span> <span class="string">'react-helmet'</span></div><div class="line"><span class="keyword">import</span> <span class="string">"./style.scss"</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Layout</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    render()&#123;</div><div class="line">        <span class="keyword">const</span> &#123;children&#125; = <span class="keyword">this</span>.props;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"layout"</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">Helmet</span> <span class="attr">defaultTitle</span>=<span class="string">"Blog by LiuYang"</span>/&gt;</span></div><div class="line">                &#123;children()&#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default Layout;</div></pre></td></tr></table></figure></p>
<p>如果有共同的footer与header，则应该在layout里实现</p>
<h4 id="首页整体布局"><a href="#首页整体布局" class="headerlink" title="首页整体布局"></a>首页整体布局</h4><p>包括左边Sidebar和右边的文章列表，按组件思维考虑，我们应该创建三个组件或者二个组件：<br><img src="/2018/03/19/Gatsby搭建博客之旅/首页组件.png" alt=""></p>
<p>下面是创建二个组件的首页布局代码：<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexRoute</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    render()&#123;</div><div class="line">        <span class="keyword">const</span> &#123;title, subtitle&#125; = <span class="keyword">this</span>.props.data.site.siteMetadata;</div><div class="line">        <span class="keyword">const</span> &#123;<span class="attr">edges</span>:posts&#125; = <span class="keyword">this</span>.props.data.allMarkdownRemark;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">                &lt;Helmet&gt;</div><div class="line">                    &lt;title&gt;&#123;title&#125;&lt;/title&gt;</div><div class="line">                    &lt;meta name="description" content=&#123;subtitle&#125;/&gt;</div><div class="line">                &lt;/Helmet&gt;</div><div class="line">                &lt;Sidebar &#123;...this.props&#125;/&gt;</div><div class="line">                &lt;div className="content"&gt;</div><div class="line">                    &lt;div className="content__inner"&gt;</div><div class="line">                        &#123;</div><div class="line">                            posts</div><div class="line">                                .filter((&#123;node:post&#125;) =&gt; post.frontmatter.title.length &gt; 0)</div><div class="line">                                .map((&#123;node:post&#125;)=&gt;&#123;</div><div class="line">                                    return (</div><div class="line">                                        &lt;Post data=&#123;post&#125; key=&#123;post.fields.slug&#125;/&gt;</div><div class="line">                                    );</div><div class="line">                                &#125;)</div><div class="line">                        &#125;</div><div class="line">                    &lt;/div&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="适应不同尺寸的屏幕"><a href="#适应不同尺寸的屏幕" class="headerlink" title="适应不同尺寸的屏幕"></a>适应不同尺寸的屏幕</h4><p>常见屏幕大小有：</p>
<ol>
<li>lg：宽度大于1100px的屏幕</li>
<li>md：宽度在[960px–1100px]之间的屏幕</li>
<li>sm：宽度在[685px–960px]之间的屏幕</li>
<li>xs：宽度在[0px–685px]之间的屏幕</li>
</ol>
<p>在不同屏幕下，首页布局也要有相应的变化，利用css的@media实现不同屏幕的适配：<a href="https://www.w3schools.com/cssref/css3_pr_mediaquery.asp" target="_blank" rel="noopener">CSS @media Rule</a><br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// _breakpoints.scss</span></div><div class="line">@mixin breakpoint-sm &#123;</div><div class="line">    @media screen and (min-width: <span class="number">685</span>) &#123;</div><div class="line">        @content</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@mixin breakpoint-md &#123;</div><div class="line">    @media screen and (min-width: <span class="number">960</span>) &#123;</div><div class="line">        @content</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// index.js的scss</span></div><div class="line">.content &#123;</div><div class="line">    &amp;__inner &#123;</div><div class="line">        <span class="attr">padding</span>:<span class="number">25</span>px <span class="number">20</span>px;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@include breakpoint-sm &#123;</div><div class="line">    .content &#123;</div><div class="line">        lost-column: <span class="number">7</span>/<span class="number">12</span>;</div><div class="line">        &amp;__inner &#123;</div><div class="line">            <span class="attr">padding</span>: <span class="number">30</span>px <span class="number">20</span>px;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@include breakpoint-md &#123;</div><div class="line">    .content &#123;</div><div class="line">        lost-column: <span class="number">2</span>/<span class="number">3</span>;</div><div class="line">        &amp;__inner &#123;</div><div class="line">            <span class="attr">padding</span>: <span class="number">40</span>px <span class="number">35</span>px;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注意上面的样式是叠加的，下面的会覆写掉面上样式。</p>
<h4 id="空格实现"><a href="#空格实现" class="headerlink" title="空格实现"></a>空格实现</h4><p>在html页面里，想实现空隔效果，可以有下面几种方案：</p>
<ol>
<li>通过空格的特殊字符实现</li>
<li>全角下的空格</li>
<li>通过css样式实现，占位div，再设置其margin值</li>
</ol>
<h4 id="博客相关的gatsby插件"><a href="#博客相关的gatsby插件" class="headerlink" title="博客相关的gatsby插件"></a>博客相关的gatsby插件</h4><ol>
<li><a href="https://www.gatsbyjs.org/packages/gatsby-source-filesystem/?=gatsby-source-filesystem" target="_blank" rel="noopener">gatsby-source-filesystem</a>：读取本地文件</li>
<li><a href="https://www.gatsbyjs.org/packages/gatsby-transformer-remark/?=gatsby-transformer-remark" target="_blank" rel="noopener">gatsby-transformer-remark</a>：使用Remark解析Markdown文件</li>
<li><a href="https://www.gatsbyjs.org/packages/gatsby-remark-images/?=gatsby-remark-images" target="_blank" rel="noopener">gatsby-remark-images</a>：用于解析图片</li>
<li><a href="https://www.gatsbyjs.org/packages/gatsby-plugin-postcss-sass/#gatsby-plugin-postcss-sass" target="_blank" rel="noopener">gatsby-plugin-postcss-sass</a>：支持sass</li>
</ol>
<p>默认通过GraphQL无法查询到文件相关的数据，当安装了gatsby-source-filesystem插件后，可以查询到File相关的数据：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/graphql_file.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>安装了gatsby-transformer-remark插件后，就可以查询Markdown相关的数据了：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/graphql_markdown.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>markdown的node结点的parent是file结点，即markdown是基于上一次插件的结果产生的，减少重复制造轮子</p>
<h3 id="Post页面"><a href="#Post页面" class="headerlink" title="Post页面"></a>Post页面</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/Post页面.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>页面的思路与主页的思路一样，使用组件化的思路设计，唯一的不同点是代码高亮显示</p>
<p>主页是一个固定页，但Post页面有很多，如果批量生成？使用gatsby的扩展点及Api来实现，整体流程如下所示：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/2018/03/19/Gatsby搭建博客之旅/gatsby模板.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">exports.createPages = <span class="function">(<span class="params">&#123;graphql, boundActionCreators&#125;</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">const</span> &#123;createPage&#125; = boundActionCreators;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">const</span> postTemplate = path.resolve(<span class="string">'./src/templates/post-template.js'</span>);</div><div class="line"></div><div class="line">        <span class="comment">// 查询所有的markdown，并创建相应的页面</span></div><div class="line">        resolve(</div><div class="line">            graphql(<span class="string">`&#123;</span></div><div class="line">                allMarkdownRemark(</div><div class="line">                    limit: 1000</div><div class="line">                ) &#123;</div><div class="line">                    edges &#123;</div><div class="line">                        node &#123;</div><div class="line">                            fields &#123;</div><div class="line">                                slug</div><div class="line">                            &#125;</div><div class="line">                            frontmatter &#123;</div><div class="line">                                category</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;`).then(<span class="function">(<span class="params">result</span>)=&gt;</span>&#123;</div><div class="line">                <span class="keyword">if</span> (result.errors) &#123;</div><div class="line">                    <span class="built_in">console</span>.log(result.errors);</div><div class="line">                    reject(result.errors)</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">// 创建对应的markdown页面</span></div><div class="line">                result.data.allMarkdownRemark.edges.forEach(<span class="function">(<span class="params">edge</span>) =&gt;</span> &#123;</div><div class="line">                    createPage(&#123;</div><div class="line">                        <span class="attr">path</span>: edge.node.fields.slug, <span class="comment">// required</span></div><div class="line">                        component: slash(postTemplate),</div><div class="line">                        <span class="attr">context</span>: &#123;</div><div class="line">                            <span class="attr">slug</span>: edge.node.fields.slug,</div><div class="line">                        &#125;,</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">                resolve();</div><div class="line">            &#125;)</div><div class="line">        )</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="Gatsby与Hexo的对比"><a href="#Gatsby与Hexo的对比" class="headerlink" title="Gatsby与Hexo的对比"></a>Gatsby与Hexo的对比</h2><p>调研Gatsby的初衷是想把博客实现由Hexo替换为Gatsby，Hexo与Gatsby都是静态网站生成器，主要差别是使用的技术不一样，Gatsby使用的都是最新技术，但最后还是继续使用了Hexo，主要原因是：Hexo提供了很多的Themes，能快速复用这些Themes。</p>
<p>此Demo的地址：<a href="https://github.com/handsomeliuyang/handsomeliuyang.github.io/tree/gatsby" target="_blank" rel="noopener">Gatsby-demo</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://www.fly63.com/article/detial/388" target="_blank" rel="noopener">中文gatsby介绍</a></li>
<li><a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">gatsbyjs</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%BA%A6%E5%AE%9A%E4%BC%98%E4%BA%8E%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">约定优于配置</a></li>
<li><a href="http://jerryzou.com/posts/10-questions-about-graphql/" target="_blank" rel="noopener">阻碍你使用 GraphQL 的十个问题</a></li>
<li><a href="https://www.howtographql.com/basics/1-graphql-is-the-better-rest/" target="_blank" rel="noopener">GraphQL is the better REST</a></li>
<li><a href="https://www.jianshu.com/p/2ad286397f7a" target="_blank" rel="noopener">对比GraphQL与REST——两种HTTP API的差异</a></li>
<li><a href="https://blog.tonyseek.com/post/graphql-vs-restful/" target="_blank" rel="noopener">GraphQL vs RESTful API 的一些想法</a></li>
<li><a href="https://github.com/alxshelepenok/gatsby-starter-lumen" target="_blank" rel="noopener">gatsby-starter-lumen</a></li>
</ol>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-03-26T12:41:33.000Z" itemprop="dateUpdated">2018-03-26 20:41:33</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://handsomeliuyang.github.io">
            <img src="/img/logo.png" alt="刘阳">
            刘阳
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="二维码">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/04/02/react-native-wechatmini/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">react-native-wechatmini</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/03/04/抽屉效果实现三端化的历程/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">抽屉效果实现三端化（android，ios，web）的历程</h4>
      </a>
    </div>
  
</nav>



    














</article>



</div>

        <footer class="footer">
    <div class="top">
        <!--
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>

-->
        <p>
            <!--
            <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            -->
            <span>Hi, I'm LiuYang. For now I'm an Android Programmer in 58. This is my blog, believe it or not.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>刘阳 &copy; 2017 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>
    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="二维码">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtklEQVR42u3aQW7EMAgF0Ln/pdttpSrJB0yVSm9WVTqZ+HlhCPD5xJ+vX5/f1/Nv/rz+87/Jb342Pnh4eHjjpeeM+yVePeXqO/e/c79Zl1uAh4eHt8brPeb+Ycl/77cg377L63h4eHgv41UXer8FSVaMh4eH9395Cay6QXkSj4eHh/cGXpIW51XT6uHeK1IcrrXg4eHhxbzqot/w90p/Dw8PD2/cVc8Lr0lLLAkheUkiWi0eHh7eAi8/cKvDVb1kep4u4+Hh4W3zqq/3vYO+V6jNy8eXV/Dw8PCWeXk7KmFMShv5wNbDc/Hw8PAWeNWX/N6IQLX8Wg1Ro/4eHh4eXpGXB4aElKfgo9pJXgLGw8PDW+Ply60mypNxqCSBLvf38PDw8A7xkrP0VJk1DxXz7cDDw8Pb5iVjVXlCfGqEK9++hzcGPDw8vKO8PHmtBo8EMwE/fAcPDw9vgTcptual2177P8c/rAEPDw9vgVd94c83pfrg6rjACIOHh4c34E1Kt9URhEn6nhc78PDw8P6ed6rE0CtAJL9WeDoeHh7eUV5eJqgWfKtFil75+CHJxsPDw1vjVRPl/HAfLS4YYhgNXeHh4eEd5eWHdXLQ98rEvTZYVHXGw8PDG/B6ZdNqO6p3b0592FA8PDy8Nd58KOpvmlt5qQIPDw9vmzdJfE8NFsxLJOXl4uHh4Q14ebM/H3iqlhJWVoKHh4e3zKsm1oUD+mjBtxDY8PDw8I7yJof+fFCgl3wn9z7MlOHh4eENeNXDd77o+b3VthkeHh7eBq/XaqoOCuRhI78rCgx4eHh4a7wkRe694ydxKUmvmy03PDw8vBfw8nCSNMMm4Sdqs+Hh4eG9hlftNOXH/dmQg4eHh7fHm4wOVMuvyWZVxw4eAgMeHh7eUV71hb8aJKqJ9dmghYeHh3eU9w2QBZKXiteEygAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = "LiuYang's Blog";
            clearTimeout(titleTime);
        } else {
            document.title = "LiuYang's Blog";
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
